{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/PosClient/src/features/dashboard/components/add-customer/add-customer-form.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Col, Form, Input, message, Row, Select } from 'antd';\nimport { map } from 'lodash';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport customerApi from '../../../../api/customer-api';\nimport useLoading from '../../../../hook/useLoading';\nimport { disabledAutosuggestion } from '../../../../utils';\nimport { useSalesCounter } from '../../pages/sales-counters/state/context';\nimport { useDistricts, useProvices, useWards } from './hook';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddCustomerForm = ({\n  toggle\n}) => {\n  _s();\n\n  const {\n    addCustomer\n  } = useSalesCounter();\n  const store = useSelector(state => state.store.store);\n  const {\n    loading,\n    handleLoading\n  } = useLoading(false);\n  const [form] = Form.useForm();\n  const [province, setProvince] = useState();\n  const [district, setDistrict] = useState();\n  const {\n    loadingProvince,\n    provinces\n  } = useProvices();\n  const {\n    loadingDistrict,\n    districts\n  } = useDistricts(province);\n  const {\n    loadingWard,\n    wards\n  } = useWards({\n    province,\n    district\n  });\n\n  const onChangeProvince = e => {\n    setProvince(e);\n    setDistrict(undefined);\n    removeField('district');\n    removeField('ward');\n  };\n\n  const onChangeDistrict = e => {\n    setDistrict(e);\n    removeField('ward');\n  };\n\n  const onChangeWard = e => {};\n\n  const removeField = field => {\n    form.setFieldsValue({\n      [field]: undefined\n    });\n  };\n\n  const onSubmit = async values => {\n    try {\n      handleLoading(true);\n      const {\n        name,\n        email,\n        phoneNo,\n        address,\n        province,\n        district,\n        ward\n      } = values;\n      const customer = await customerApi.createCustomer({\n        storeId: store._id,\n        data: {\n          name,\n          email,\n          phoneNo,\n          address,\n          province,\n          district,\n          ward,\n          source: 'pos'\n        }\n      });\n      addCustomer(customer);\n\n      if (toggle) {\n        toggle();\n      }\n    } catch (error) {\n      const {\n        data\n      } = error.response;\n\n      if (data.statusCode === 409) {\n        message.error('Số điện thoại đã tồn tại');\n      } else {\n        message.error('Xảy ra lỗi, vui lòng thử lại');\n      }\n    } finally {\n      handleLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    layout: \"vertical\",\n    onFinish: onSubmit,\n    form: form,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      gutter: 15,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"T\\xEAn kh\\xE1ch h\\xE0ng\",\n          name: \"name\",\n          rules: [{\n            required: true,\n            message: 'Vui lòng nhập Tên khách hàng'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u0110i\\u1EC1n t\\xEAn kh\\xE1ch h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n          name: \"phoneNo\",\n          rules: [{\n            required: true,\n            message: 'Vui lòng nhập Số điện thoại'\n          }, {\n            pattern: /^(0|\\+84)(9|3|7|8|5){1}([0-9]{8})$/g,\n            message: 'Vui lòng nhập Số điện thoại đúng'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u0110i\\u1EC1n s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Email\",\n          name: \"email\",\n          rules: [{\n            required: true,\n            message: 'Vui lòng nhập Email'\n          }, {\n            type: 'email',\n            message: 'Vui lòng nhập Email hợp lệ'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u0110i\\u1EC1n email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"T\\u1EC9nh/Th\\xE0nh ph\\u1ED1\",\n          name: \"province\",\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Ch\\u1ECDn t\\u1EC9nh/th\\xE0nh ph\\u1ED1\",\n            showSearch: true,\n            style: {\n              width: '100%'\n            },\n            optionFilterProp: \"children\",\n            onChange: onChangeProvince,\n            filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n            loading: loadingProvince,\n            onFocus: disabledAutosuggestion,\n            children: map(provinces, province => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: province.code,\n              children: province.name\n            }, province.code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Qu\\u1EADn/Huy\\u1EC7n\",\n          name: \"district\",\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Ch\\u1ECDn qu\\u1EADn/huy\\u1EC7n\",\n            showSearch: true,\n            style: {\n              width: '100%'\n            },\n            optionFilterProp: \"children\",\n            onChange: onChangeDistrict,\n            filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n            loading: loadingDistrict,\n            disabled: !province,\n            onFocus: disabledAutosuggestion,\n            children: map(districts, district => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: district.code,\n              children: district.name\n            }, district.code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 12,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"X\\xE3/Ph\\u01B0\\u1EDDng\",\n          name: \"ward\",\n          children: /*#__PURE__*/_jsxDEV(Select, {\n            placeholder: \"Ch\\u1ECDn x\\xE3/ph\\u01B0\\u1EDDng\",\n            onChange: onChangeWard,\n            showSearch: true,\n            filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n            disabled: !province || !district,\n            loading: loadingWard,\n            onFocus: disabledAutosuggestion,\n            children: map(wards, ward => /*#__PURE__*/_jsxDEV(Select.Option, {\n              value: ward.code,\n              children: ward.name\n            }, ward.code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"address\",\n          label: \"\\u0110\\u1ECBa ch\\u1EC9\",\n          rules: [{\n            required: true,\n            message: 'Vui lòng nhập Địa chỉ khách hàng'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n            placeholder: \"\\u0110i\\u1EC1n \\u0111\\u1ECBa ch\\u1EC9 kh\\xE1ch h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      align: \"middle\",\n      justify: \"end\",\n      gutter: 15,\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          disabled: loading,\n          onClick: toggle,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          loading: loading,\n          children: \"Th\\xEAm m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddCustomerForm, \"bemGO/2PbQenormPKTlONEDJh04=\", false, function () {\n  return [useSalesCounter, useSelector, useLoading, Form.useForm, useProvices, useDistricts, useWards];\n});\n\n_c = AddCustomerForm;\nexport default AddCustomerForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddCustomerForm\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/PosClient/src/features/dashboard/components/add-customer/add-customer-form.tsx"],"names":["Button","Col","Form","Input","message","Row","Select","map","React","useState","useSelector","customerApi","useLoading","disabledAutosuggestion","useSalesCounter","useDistricts","useProvices","useWards","AddCustomerForm","toggle","addCustomer","store","state","loading","handleLoading","form","useForm","province","setProvince","district","setDistrict","loadingProvince","provinces","loadingDistrict","districts","loadingWard","wards","onChangeProvince","e","undefined","removeField","onChangeDistrict","onChangeWard","field","setFieldsValue","onSubmit","values","name","email","phoneNo","address","ward","customer","createCustomer","storeId","_id","data","source","error","response","statusCode","required","pattern","type","width","input","option","children","toLowerCase","indexOf","code"],"mappings":"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","sourcesContent":["import { Button, Col, Form, Input, message, Row, Select } from 'antd';\nimport { Store } from 'antd/lib/form/interface';\nimport TextArea from 'antd/lib/input/TextArea';\nimport { map } from 'lodash';\nimport React, { FC, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport customerApi from '../../../../api/customer-api';\nimport { ICustomer } from '../../../../collections/customer';\nimport useLoading from '../../../../hook/useLoading';\nimport { disabledAutosuggestion } from '../../../../utils';\nimport { useSalesCounter } from '../../pages/sales-counters/state/context';\nimport { useDistricts, useProvices, useWards } from './hook';\nimport { District, Province, Ward } from './interface';\n\ninterface Props {\n    toggle?: () => void;\n}\n\nconst AddCustomerForm: FC<Props> = ({ toggle }) => {\n    const { addCustomer } = useSalesCounter();\n    const store = useSelector((state: any) => state.store.store);\n    const { loading, handleLoading } = useLoading(false);\n    const [form] = Form.useForm();\n\n    const [province, setProvince] = useState<string>();\n    const [district, setDistrict] = useState<string>();\n\n    const { loadingProvince, provinces } = useProvices();\n    const { loadingDistrict, districts } = useDistricts(province);\n    const { loadingWard, wards } = useWards({ province, district });\n\n    const onChangeProvince = (e: string) => {\n        setProvince(e);\n\n        setDistrict(undefined);\n        removeField('district');\n        removeField('ward');\n    };\n\n    const onChangeDistrict = (e: string) => {\n        setDistrict(e);\n\n        removeField('ward');\n    };\n\n    const onChangeWard = (e: string) => {};\n\n    const removeField = (field: string) => {\n        form.setFieldsValue({\n            [field]: undefined,\n        });\n    };\n\n    const onSubmit = async (values: Store) => {\n        try {\n            handleLoading(true);\n\n            const { name, email, phoneNo, address, province, district, ward } = values;\n            const customer: ICustomer = await customerApi.createCustomer({\n                storeId: store._id,\n                data: {\n                    name,\n                    email,\n                    phoneNo,\n                    address,\n                    province,\n                    district,\n                    ward,\n                    source: 'pos',\n                },\n            });\n\n            addCustomer(customer);\n            if (toggle) {\n                toggle();\n            }\n        } catch (error) {\n            const { data } = error.response;\n\n            if (data.statusCode === 409) {\n                message.error('Số điện thoại đã tồn tại');\n            } else {\n                message.error('Xảy ra lỗi, vui lòng thử lại');\n            }\n        } finally {\n            handleLoading(false);\n        }\n    };\n\n    return (\n        <Form layout='vertical' onFinish={onSubmit} form={form}>\n            <Row gutter={15}>\n                <Col span={12}>\n                    <Form.Item\n                        label='Tên khách hàng'\n                        name='name'\n                        rules={[{ required: true, message: 'Vui lòng nhập Tên khách hàng' }]}\n                    >\n                        <Input placeholder='Điền tên khách hàng' />\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item\n                        label='Số điện thoại'\n                        name='phoneNo'\n                        rules={[\n                            { required: true, message: 'Vui lòng nhập Số điện thoại' },\n                            {\n                                pattern: /^(0|\\+84)(9|3|7|8|5){1}([0-9]{8})$/g,\n                                message: 'Vui lòng nhập Số điện thoại đúng',\n                            },\n                        ]}\n                    >\n                        <Input placeholder='Điền số điện thoại' />\n                    </Form.Item>\n                </Col>\n\n                {/* <Col span={12}>\n                    <Form.Item label='Ngày sinh'>\n                        <DatePicker style={{ width: '100%' }} />\n                    </Form.Item>\n                </Col> */}\n\n                <Col span={12}>\n                    <Form.Item\n                        label='Email'\n                        name='email'\n                        rules={[\n                            { required: true, message: 'Vui lòng nhập Email' },\n                            {\n                                type: 'email',\n                                message: 'Vui lòng nhập Email hợp lệ',\n                            },\n                        ]}\n                    >\n                        <Input placeholder='Điền email' />\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item label='Tỉnh/Thành phố' name='province'>\n                        <Select\n                            placeholder='Chọn tỉnh/thành phố'\n                            showSearch\n                            style={{ width: '100%' }}\n                            optionFilterProp='children'\n                            onChange={onChangeProvince}\n                            filterOption={(input: string, option: any) =>\n                                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                            }\n                            loading={loadingProvince}\n                            onFocus={disabledAutosuggestion}\n                        >\n                            {map(provinces, (province: Province) => (\n                                <Select.Option value={province.code} key={province.code}>\n                                    {province.name}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item label='Quận/Huyện' name='district'>\n                        <Select\n                            placeholder='Chọn quận/huyện'\n                            showSearch\n                            style={{ width: '100%' }}\n                            optionFilterProp='children'\n                            onChange={onChangeDistrict}\n                            filterOption={(input: string, option: any) =>\n                                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                            }\n                            loading={loadingDistrict}\n                            disabled={!province}\n                            onFocus={disabledAutosuggestion}\n                        >\n                            {map(districts, (district: District) => (\n                                <Select.Option value={district.code} key={district.code}>\n                                    {district.name}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                </Col>\n\n                <Col span={12}>\n                    <Form.Item label='Xã/Phường' name='ward'>\n                        <Select\n                            placeholder='Chọn xã/phường'\n                            onChange={onChangeWard}\n                            showSearch\n                            filterOption={(input, option: any) =>\n                                option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                            }\n                            disabled={!province || !district}\n                            loading={loadingWard}\n                            onFocus={disabledAutosuggestion}\n                        >\n                            {map(wards, (ward: Ward) => (\n                                <Select.Option value={ward.code} key={ward.code}>\n                                    {ward.name}\n                                </Select.Option>\n                            ))}\n                        </Select>\n                    </Form.Item>\n                </Col>\n\n                <Col span={24}>\n                    <Form.Item\n                        name='address'\n                        label='Địa chỉ'\n                        rules={[\n                            {\n                                required: true,\n                                message: 'Vui lòng nhập Địa chỉ khách hàng',\n                            },\n                        ]}\n                    >\n                        <Input.TextArea placeholder='Điền địa chỉ khách hàng' />\n                    </Form.Item>\n                </Col>\n            </Row>\n\n            <Row align='middle' justify='end' gutter={15}>\n                <Col>\n                    <Button disabled={loading} onClick={toggle}>\n                        Hủy\n                    </Button>\n                </Col>\n                <Col>\n                    <Button type='primary' htmlType='submit' loading={loading}>\n                        Thêm mới\n                    </Button>\n                </Col>\n            </Row>\n        </Form>\n    );\n};\n\nexport default AddCustomerForm;\n"]},"metadata":{},"sourceType":"module"}