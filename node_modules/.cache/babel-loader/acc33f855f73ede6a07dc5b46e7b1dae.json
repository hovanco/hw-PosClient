{"ast":null,"code":"import { types } from './types';\nexport const initialState = {\n  products: [],\n  payments: [],\n  customer: undefined,\n  shipment: 0,\n  customerNote: undefined,\n  moneyCustomer: 0,\n  isEdit: false,\n  delivered: false,\n  sale: false,\n  isRestrictAction: false,\n  createdBy: undefined\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case types.LOAD_NEW_ORDER_DRAFT:\n      state.products = action.payload.products;\n      state.payments = action.payload.payments;\n      state.customer = action.payload.customer;\n      state.shipment = action.payload.shipment;\n      state.customerNote = action.payload.customerNote;\n      state.moneyCustomer = action.payload.moneyCustomer;\n      state.isEdit = action.payload.isEdit;\n      state.delivered = action.payload.delivered;\n      state.sale = action.payload.sale;\n      state.isRestrictAction = action.payload.isRestrictAction;\n      state.createdBy = action.payload.createdBy;\n      state.id = action.payload.id;\n      return;\n\n    case types.ADD_PRODUCT:\n      {\n        const product = state.products.find(product => product._id === action.payload._id);\n\n        if (product) {\n          state.products = state.products.map(product => {\n            if (product._id === action.payload._id) return { ...product,\n              count: product.count + 1\n            };\n            return product;\n          });\n        } else {\n          state.products.unshift({ ...action.payload,\n            count: 1\n          });\n        }\n\n        if (!state.isEdit) {\n          state.isEdit = true;\n        }\n\n        return;\n      }\n\n    case types.REMOVE_PRODUCT:\n      state.products = state.products.filter(product => product._id !== action.payload._id);\n\n      if (!state.isEdit) {\n        state.isEdit = true;\n      }\n\n      return;\n\n    case types.ADD_CUSTOMER:\n      state.customer = action.payload;\n\n      if (!state.isEdit) {\n        state.isEdit = true;\n      }\n\n      return;\n\n    case types.UPDATE_QUANTITY:\n      state.products = state.products.map(product => {\n        if (product._id === action.payload._id) return action.payload;\n        return product;\n      });\n      return;\n\n    case types.ADD_PAYMENT:\n      state.payments.push(action.payload);\n\n      if (!state.isEdit) {\n        state.isEdit = true;\n      }\n\n      return;\n\n    case types.UPDATE_PAYMENT:\n      state.payments = state.payments.map(payment => {\n        if (payment.type === action.payload.type) return action.payload;\n        return payment;\n      });\n\n      if (!state.isEdit) {\n        state.isEdit = true;\n      }\n\n      return;\n\n    case types.REMOVE_PAYMENT:\n      {\n        state.payments = state.payments.filter(payment => payment.type !== action.payload.type);\n\n        if (!state.isEdit) {\n          state.isEdit = true;\n        }\n\n        return;\n      }\n\n    case types.ADD_CUSTOMER_NOTE:\n      state.customerNote = action.payload;\n\n      if (!state.isEdit) {\n        state.isEdit = true;\n      }\n\n      return;\n\n    case types.CHANGE_DELIVERED:\n      state.delivered = action.payload;\n      return;\n\n    case types.CHANGE_SALE:\n      state.sale = action.payload;\n      return;\n\n    case types.ADD_SHIPMENT:\n      state.shipment = action.payload;\n\n      if (!state.isEdit) {\n        state.isEdit = true;\n      }\n\n      return;\n\n    case types.CHANGE_IS_RESTRICT_ACTION:\n      {\n        state.isRestrictAction = action.payload;\n        return;\n      }\n\n    case types.RESET:\n      state.products = [];\n      state.payments = [];\n      state.customer = undefined;\n      state.shipment = 0;\n      state.customerNote = undefined;\n      state.moneyCustomer = 0;\n      state.isEdit = false;\n      state.delivered = false;\n      state.sale = false;\n      state.isRestrictAction = false;\n      state.createdBy = undefined;\n      return;\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/PosClient/src/features/dashboard/pages/sales-counters/state/reducer.ts"],"names":["types","initialState","products","payments","customer","undefined","shipment","customerNote","moneyCustomer","isEdit","delivered","sale","isRestrictAction","createdBy","reducer","state","action","type","LOAD_NEW_ORDER_DRAFT","payload","id","ADD_PRODUCT","product","find","_id","map","count","unshift","REMOVE_PRODUCT","filter","ADD_CUSTOMER","UPDATE_QUANTITY","ADD_PAYMENT","push","UPDATE_PAYMENT","payment","REMOVE_PAYMENT","ADD_CUSTOMER_NOTE","CHANGE_DELIVERED","CHANGE_SALE","ADD_SHIPMENT","CHANGE_IS_RESTRICT_ACTION","RESET"],"mappings":"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","sourcesContent":["import { IState, Payment } from './interface';\nimport { types } from './types';\n\nexport const initialState: IState = {\n    products: [],\n    payments: [],\n    customer: undefined,\n    shipment: 0,\n    customerNote: undefined,\n    moneyCustomer: 0,\n    isEdit: false,\n    delivered: false,\n    sale: false,\n    isRestrictAction: false,\n    createdBy: undefined,\n};\n\ninterface IAction {\n    type: string;\n    payload: any;\n}\n\nconst reducer = (state: IState, action: IAction) => {\n    switch (action.type) {\n        case types.LOAD_NEW_ORDER_DRAFT:\n            state.products = action.payload.products;\n            state.payments = action.payload.payments;\n            state.customer = action.payload.customer;\n            state.shipment = action.payload.shipment;\n            state.customerNote = action.payload.customerNote;\n            state.moneyCustomer = action.payload.moneyCustomer;\n            state.isEdit = action.payload.isEdit;\n            state.delivered = action.payload.delivered;\n            state.sale = action.payload.sale;\n            state.isRestrictAction = action.payload.isRestrictAction;\n            state.createdBy = action.payload.createdBy;\n            state.id = action.payload.id;\n\n            return;\n\n        case types.ADD_PRODUCT: {\n            const product = state.products.find((product) => product._id === action.payload._id);\n\n            if (product) {\n                state.products = state.products.map((product) => {\n                    if (product._id === action.payload._id)\n                        return { ...product, count: product.count + 1 };\n                    return product;\n                });\n            } else {\n                state.products.unshift({ ...action.payload, count: 1 });\n            }\n\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n\n            return;\n        }\n\n        case types.REMOVE_PRODUCT:\n            state.products = state.products.filter((product) => product._id !== action.payload._id);\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n            return;\n\n        case types.ADD_CUSTOMER:\n            state.customer = action.payload;\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n            return;\n\n        case types.UPDATE_QUANTITY:\n            state.products = state.products.map((product) => {\n                if (product._id === action.payload._id) return action.payload;\n                return product;\n            });\n\n            return;\n\n        case types.ADD_PAYMENT:\n            state.payments.push(action.payload);\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n            return;\n\n        case types.UPDATE_PAYMENT:\n            state.payments = state.payments.map((payment: Payment) => {\n                if (payment.type === action.payload.type) return action.payload;\n                return payment;\n            });\n\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n            return;\n\n        case types.REMOVE_PAYMENT: {\n            state.payments = state.payments.filter(\n                (payment) => payment.type !== action.payload.type,\n            );\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n            return;\n        }\n\n        case types.ADD_CUSTOMER_NOTE:\n            state.customerNote = action.payload;\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n            return;\n\n        case types.CHANGE_DELIVERED:\n            state.delivered = action.payload;\n            return;\n\n        case types.CHANGE_SALE:\n            state.sale = action.payload;\n            return;\n\n        case types.ADD_SHIPMENT:\n            state.shipment = action.payload;\n            if (!state.isEdit) {\n                state.isEdit = true;\n            }\n            return;\n\n        case types.CHANGE_IS_RESTRICT_ACTION: {\n            state.isRestrictAction = action.payload;\n            return;\n        }\n\n        case types.RESET:\n            state.products = [];\n            state.payments = [];\n            state.customer = undefined;\n            state.shipment = 0;\n            state.customerNote = undefined;\n            state.moneyCustomer = 0;\n            state.isEdit = false;\n            state.delivered = false;\n            state.sale = false;\n            state.isRestrictAction = false;\n            state.createdBy = undefined;\n            return;\n\n        default:\n            return state;\n    }\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}