{"ast":null,"code":"import _ from 'lodash';\nimport moment from 'moment';\nimport { EBillingPackageType } from '../api/billing-api';\nexport function isExpiredPackage(expiredTime) {\n  const endTime = moment(expiredTime);\n  const timeCurrent = moment();\n  return endTime.diff(timeCurrent, 'days') < 0;\n}\nexport function checkRestrictAction(packagesActive) {\n  return !_.some(packagesActive, packageAct => !isExpiredPackage(packageAct.expiredAt) && (packageAct.packageType === EBillingPackageType.Trial || packageAct.packageType === EBillingPackageType.Omni || packageAct.packageType & EBillingPackageType.Pos));\n}\n\nfunction getNumOfDaysUntilExpired(timeStart, timeEnd) {\n  return timeEnd.diff(timeStart, 'days');\n}\n\nexport function checkWarningExpiration(expiredAt) {\n  const duration = getNumOfDaysUntilExpired(moment(), moment(expiredAt));\n  return duration >= 0 && duration <= 10;\n}","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/PosClient/src/utils/get-time.ts"],"names":["_","moment","EBillingPackageType","isExpiredPackage","expiredTime","endTime","timeCurrent","diff","checkRestrictAction","packagesActive","some","packageAct","expiredAt","packageType","Trial","Omni","Pos","getNumOfDaysUntilExpired","timeStart","timeEnd","checkWarningExpiration","duration"],"mappings":"AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,mBAAT,QAAoC,oBAApC;AAGA,OAAO,SAASC,gBAAT,CAA0BC,WAA1B,EAA+C;AAClD,QAAMC,OAAO,GAAGJ,MAAM,CAACG,WAAD,CAAtB;AACA,QAAME,WAAW,GAAGL,MAAM,EAA1B;AACA,SAAOI,OAAO,CAACE,IAAR,CAAaD,WAAb,EAA0B,MAA1B,IAAoC,CAA3C;AACH;AAED,OAAO,SAASE,mBAAT,CAA6BC,cAA7B,EAAyD;AAC5D,SAAO,CAACT,CAAC,CAACU,IAAF,CAAOD,cAAP,EAAwBE,UAAD,IAC3B,CAACR,gBAAgB,CAACQ,UAAU,CAACC,SAAZ,CAAjB,KACID,UAAU,CAACE,WAAX,KAA2BX,mBAAmB,CAACY,KAA/C,IACAH,UAAU,CAACE,WAAX,KAA2BX,mBAAmB,CAACa,IAD/C,IAEAJ,UAAU,CAACE,WAAX,GAAyBX,mBAAmB,CAACc,GAHjD,CADI,CAAR;AAOH;;AAED,SAASC,wBAAT,CAAmCC,SAAnC,EAA6DC,OAA7D,EAAqF;AACjF,SAAOA,OAAO,CAACZ,IAAR,CAAaW,SAAb,EAAwB,MAAxB,CAAP;AACH;;AAED,OAAO,SAASE,sBAAT,CAAgCR,SAAhC,EAA4D;AAC/D,QAAMS,QAAQ,GAAGJ,wBAAwB,CAAChB,MAAM,EAAP,EAAWA,MAAM,CAACW,SAAD,CAAjB,CAAzC;AACA,SAAOS,QAAQ,IAAI,CAAZ,IAAiBA,QAAQ,IAAI,EAApC;AACH","sourcesContent":["import _ from 'lodash';\nimport moment from 'moment';\nimport { EBillingPackageType } from '../api/billing-api';\nimport { IPackage } from '../collections/billing';\n\nexport function isExpiredPackage(expiredTime: string) {\n    const endTime = moment(expiredTime);\n    const timeCurrent = moment();\n    return endTime.diff(timeCurrent, 'days') < 0;\n}\n\nexport function checkRestrictAction(packagesActive: IPackage[]) {\n    return !_.some(packagesActive, (packageAct: IPackage) =>\n        !isExpiredPackage(packageAct.expiredAt) && (\n            packageAct.packageType === EBillingPackageType.Trial ||\n            packageAct.packageType === EBillingPackageType.Omni ||\n            packageAct.packageType & EBillingPackageType.Pos\n        )\n    );\n}\n\nfunction getNumOfDaysUntilExpired (timeStart: moment.Moment, timeEnd: moment.Moment) {\n    return timeEnd.diff(timeStart, 'days')\n}\n\nexport function checkWarningExpiration(expiredAt: string): boolean {\n    const duration = getNumOfDaysUntilExpired(moment(), moment(expiredAt));\n    return duration >= 0 && duration <= 10;\n}\n"]},"metadata":{},"sourceType":"module"}