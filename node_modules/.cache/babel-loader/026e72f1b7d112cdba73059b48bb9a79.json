{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/PosClient/src/features/dashboard/pages/sales-counters/state/context.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { getPackagesActive } from '../../../../../api/billing-api';\nimport useImmerReducer from '../../../../../hook/useImmerReducer';\nimport { checkRestrictAction } from '../../../../../utils/get-time';\nimport reducer, { initialState } from './reducer';\nimport { types } from './types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst intialContext = {\n  state: initialState,\n  dispatch: () => null\n};\nconst Context = /*#__PURE__*/createContext(intialContext);\n\nconst ProviderContext = ({\n  children\n}) => {\n  _s();\n\n  const [state, dispatch] = useImmerReducer(reducer, initialState); // eslint-disable-next-line\n\n  const value = useMemo(() => ({\n    state,\n    dispatch\n  }), [state]);\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 12\n  }, this);\n};\n\n_s(ProviderContext, \"gC2VGmEwTnbB1UxRsJQVzhdEP/g=\", false, function () {\n  return [useImmerReducer];\n});\n\n_c = ProviderContext;\nexport const useSalesCounter = () => {\n  _s2();\n\n  const value = useContext(Context);\n  const {\n    state,\n    dispatch\n  } = value;\n  const store = useSelector(state => state.store.store);\n\n  const getPackages = async () => {\n    const packages = await getPackagesActive(store._id);\n    const pkgsActive = packages.filter(item => item.active);\n    dispatch({\n      type: types.CHANGE_IS_RESTRICT_ACTION,\n      payload: checkRestrictAction(pkgsActive)\n    });\n  };\n\n  const addProduct = useCallback(product => {\n    dispatch({\n      type: types.ADD_PRODUCT,\n      payload: product\n    }); // eslint-disable-next-line\n  }, []);\n\n  const removeProduct = product => {\n    dispatch({\n      type: types.REMOVE_PRODUCT,\n      payload: product\n    });\n  };\n\n  const updateCount = useCallback(product => {\n    dispatch({\n      type: types.UPDATE_QUANTITY,\n      payload: product\n    }); // eslint-disable-next-line\n  }, []);\n  const addCustomer = useCallback(customer => {\n    dispatch({\n      type: types.ADD_CUSTOMER,\n      payload: customer\n    }); // eslint-disable-next-line\n  }, []);\n  const addPayment = useCallback(payment => {\n    dispatch({\n      type: types.ADD_PAYMENT,\n      payload: payment\n    }); // eslint-disable-next-line\n  }, []);\n  const updatePayment = useCallback(payment => {\n    dispatch({\n      type: types.UPDATE_PAYMENT,\n      payload: payment\n    }); // eslint-disable-next-line\n  }, []);\n  const removePayment = useCallback(payment => {\n    dispatch({\n      type: types.REMOVE_PAYMENT,\n      payload: payment\n    }); // eslint-disable-next-line\n  }, []);\n  const addShipment = useCallback(shipment => {\n    dispatch({\n      type: types.ADD_SHIPMENT,\n      payload: shipment\n    }); // eslint-disable-next-line\n  }, []);\n  const addCustomerNote = useCallback(note => {\n    dispatch({\n      type: types.ADD_CUSTOMER_NOTE,\n      payload: note\n    }); // eslint-disable-next-line\n  }, []);\n  const changeDelivered = useCallback(check => {\n    dispatch({\n      type: types.CHANGE_DELIVERED,\n      payload: check\n    }); // eslint-disable-next-line\n  }, []);\n  const changeSale = useCallback(check => {\n    dispatch({\n      type: types.CHANGE_SALE,\n      payload: check\n    }); // eslint-disable-next-line\n  }, []);\n  const resetOrder = useCallback(() => {\n    dispatch({\n      type: types.RESET\n    }); // eslint-disable-next-line\n  }, []);\n  return { ...state,\n    addProduct,\n    removeProduct,\n    updateCount,\n    addCustomer,\n    addPayment,\n    updatePayment,\n    removePayment,\n    addShipment,\n    addCustomerNote,\n    resetOrder,\n    changeDelivered,\n    changeSale,\n    getPackages\n  };\n};\n\n_s2(useSalesCounter, \"tYPl7mgHKzQMna++l8NCj5WPwDY=\", false, function () {\n  return [useSelector];\n});\n\nexport default ProviderContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProviderContext\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/PosClient/src/features/dashboard/pages/sales-counters/state/context.tsx"],"names":["React","createContext","useCallback","useContext","useMemo","useSelector","getPackagesActive","useImmerReducer","checkRestrictAction","reducer","initialState","types","intialContext","state","dispatch","Context","ProviderContext","children","value","useSalesCounter","store","getPackages","packages","_id","pkgsActive","filter","item","active","type","CHANGE_IS_RESTRICT_ACTION","payload","addProduct","product","ADD_PRODUCT","removeProduct","REMOVE_PRODUCT","updateCount","UPDATE_QUANTITY","addCustomer","customer","ADD_CUSTOMER","addPayment","payment","ADD_PAYMENT","updatePayment","UPDATE_PAYMENT","removePayment","REMOVE_PAYMENT","addShipment","shipment","ADD_SHIPMENT","addCustomerNote","note","ADD_CUSTOMER_NOTE","changeDelivered","check","CHANGE_DELIVERED","changeSale","CHANGE_SALE","resetOrder","RESET"],"mappings":"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","sourcesContent":["import React, { createContext, FC, ReactNode, useCallback, useContext, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { getPackagesActive } from '../../../../../api/billing-api';\nimport { IPackage } from '../../../../../collections/billing';\nimport { ICustomer } from '../../../../../collections/customer';\nimport useImmerReducer from '../../../../../hook/useImmerReducer';\nimport { checkRestrictAction } from '../../../../../utils/get-time';\nimport { IContext, Payment, ProductState } from './interface';\nimport reducer, { initialState } from './reducer';\nimport { types } from './types';\n\nconst intialContext = {\n    state: initialState,\n    dispatch: () => null,\n};\n\nconst Context = createContext<IContext>(intialContext);\n\ninterface Props {\n    children: ReactNode;\n}\n\nconst ProviderContext: FC<Props> = ({ children }) => {\n    const [state, dispatch] = useImmerReducer(reducer, initialState);\n\n    // eslint-disable-next-line\n    const value = useMemo(() => ({ state, dispatch }), [state]);\n\n    return <Context.Provider value={value}>{children}</Context.Provider>;\n};\n\nexport const useSalesCounter = () => {\n    const value = useContext(Context);\n    const { state, dispatch } = value;\n\n    const store = useSelector((state: any) => state.store.store);\n\n    const getPackages = async () => {\n        const packages: IPackage[] = await getPackagesActive(store._id);\n        const pkgsActive = packages.filter((item: IPackage) => item.active);\n\n        dispatch({\n            type: types.CHANGE_IS_RESTRICT_ACTION,\n            payload: checkRestrictAction(pkgsActive),\n        });\n    };\n\n    const addProduct = useCallback((product: ProductState) => {\n        dispatch({\n            type: types.ADD_PRODUCT,\n            payload: product,\n        });\n        // eslint-disable-next-line\n    }, []);\n\n    const removeProduct = (product: ProductState) => {\n        dispatch({\n            type: types.REMOVE_PRODUCT,\n            payload: product,\n        });\n    };\n\n    const updateCount = useCallback((product: ProductState) => {\n        dispatch({\n            type: types.UPDATE_QUANTITY,\n            payload: product,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const addCustomer = useCallback((customer: ICustomer) => {\n        dispatch({\n            type: types.ADD_CUSTOMER,\n            payload: customer,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const addPayment = useCallback((payment: Payment) => {\n        dispatch({\n            type: types.ADD_PAYMENT,\n            payload: payment,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const updatePayment = useCallback((payment: Payment) => {\n        dispatch({\n            type: types.UPDATE_PAYMENT,\n            payload: payment,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const removePayment = useCallback((payment: Payment) => {\n        dispatch({\n            type: types.REMOVE_PAYMENT,\n            payload: payment,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const addShipment = useCallback((shipment: number) => {\n        dispatch({\n            type: types.ADD_SHIPMENT,\n            payload: shipment,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const addCustomerNote = useCallback((note: string) => {\n        dispatch({\n            type: types.ADD_CUSTOMER_NOTE,\n            payload: note,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const changeDelivered = useCallback((check: boolean) => {\n        dispatch({\n            type: types.CHANGE_DELIVERED,\n            payload: check,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const changeSale = useCallback((check: boolean) => {\n        dispatch({\n            type: types.CHANGE_SALE,\n            payload: check,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    const resetOrder = useCallback(() => {\n        dispatch({\n            type: types.RESET,\n        });\n\n        // eslint-disable-next-line\n    }, []);\n\n    return {\n        ...state,\n        addProduct,\n        removeProduct,\n        updateCount,\n        addCustomer,\n        addPayment,\n        updatePayment,\n        removePayment,\n        addShipment,\n        addCustomerNote,\n        resetOrder,\n        changeDelivered,\n        changeSale,\n        getPackages,\n    };\n};\n\nexport default ProviderContext;\n"]},"metadata":{},"sourceType":"module"}