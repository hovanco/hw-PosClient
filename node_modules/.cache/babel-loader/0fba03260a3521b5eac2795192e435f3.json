{"ast":null,"code":"var _jsxFileName = \"/Users/mac3/Desktop/workspace/PosClient/src/features/dashboard/components/toggle-product-list/products.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Empty, Space } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { useSelector } from 'react-redux';\nimport productApi from '../../../../api/product-api';\nimport { Loading } from '../../../../components';\nimport { CategorySelect } from './category-select';\nimport Product from './product';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LIMIT = 15;\n\nconst Products = () => {\n  _s();\n\n  const [page, setPage] = useState(1);\n  const store = useSelector(state => state.store.store);\n  const [category, setCategory] = useState();\n  const [loading, setLoading] = useState(true);\n  const [products, setProducts] = useState([]);\n  const [total, setTotal] = useState(1);\n\n  const loadMore = () => {\n    if (Math.ceil(total / LIMIT) > page) {\n      loadProducts(page + 1);\n      setPage(page + 1);\n    }\n  };\n\n  const loadProducts = async pageNumber => {\n    try {\n      setLoading(true);\n      const query = {\n        storeId: store._id,\n        page: pageNumber,\n        limit: LIMIT,\n        withQuantity: true\n      };\n\n      if (category) {\n        query.categoryId = category;\n      }\n\n      const response = await productApi.getProducts(query);\n      setProducts([...products, ...response.data]);\n      setTotal(response.total);\n      setPage(pageNumber);\n    } catch (error) {} finally {\n      setLoading(false);\n    }\n  };\n\n  const selectCategory = async categoryId => {\n    setCategory(categoryId);\n    const response = await productApi.getProducts({\n      storeId: store._id,\n      page: 1,\n      limit: LIMIT,\n      categoryId,\n      withQuantity: true\n    });\n    setPage(1);\n    setProducts([...response.data]);\n    setTotal(response.total);\n  };\n\n  const removeFilter = async () => {\n    setCategory(undefined);\n    const response = await productApi.getProducts({\n      storeId: store._id,\n      page: 1,\n      limit: LIMIT,\n      withQuantity: true\n    });\n    setPage(1);\n    setProducts([...response.data]);\n    setTotal(response.total);\n  };\n\n  useEffect(() => {\n    loadProducts(1); // eslint-disable-next-line\n  }, []);\n\n  const renderContent = () => {\n    if (products.length > 0) {\n      return /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        pageStart: page,\n        loadMore: loadMore,\n        hasMore: !loading && Math.ceil(total / LIMIT) > page,\n        useWindow: false,\n        initialLoad: false,\n        isReverse: false,\n        threshold: 10,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"products\",\n          children: products.map(product => /*#__PURE__*/_jsxDEV(Product, {\n            product: product\n          }, product._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (loading && products.length === 0) {\n      return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 20\n      }, this);\n    }\n\n    if (!loading && products.length === 0) {\n      return /*#__PURE__*/_jsxDEV(Empty, {\n        image: Empty.PRESENTED_IMAGE_SIMPLE,\n        description: \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"products-wrap\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '15px 24px 0'\n      },\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        size: 3,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          onClick: removeFilter,\n          children: \"T\\u1EA5t c\\u1EA3 s\\u1EA3n ph\\u1EA9m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CategorySelect, {\n          onSelect: selectCategory,\n          categoryId: category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-scroll\",\n      style: {\n        overflowY: 'auto'\n      },\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Products, \"6YLBWsG6U+OeWgkiHwWuGv1CszI=\", false, function () {\n  return [useSelector];\n});\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["/Users/mac3/Desktop/workspace/PosClient/src/features/dashboard/components/toggle-product-list/products.tsx"],"names":["Button","Empty","Space","React","useEffect","useState","InfiniteScroll","useSelector","productApi","Loading","CategorySelect","Product","LIMIT","Products","page","setPage","store","state","category","setCategory","loading","setLoading","products","setProducts","total","setTotal","loadMore","Math","ceil","loadProducts","pageNumber","query","storeId","_id","limit","withQuantity","categoryId","response","getProducts","data","error","selectCategory","removeFilter","undefined","renderContent","length","map","product","PRESENTED_IMAGE_SIMPLE","padding","overflowY"],"mappings":";;;AAAA,SAASA,MAAT,EAAiBC,KAAjB,EAAwBC,KAAxB,QAAqC,MAArC;AACA,OAAOC,KAAP,IAAoBC,SAApB,EAA+BC,QAA/B,QAA+C,OAA/C;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AAEA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,cAAT,QAA+B,mBAA/B;AACA,OAAOC,OAAP,MAAoB,WAApB;;;AAIA,MAAMC,KAAK,GAAG,EAAd;;AAEA,MAAMC,QAAmB,GAAG,MAAM;AAAA;;AAC9B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAS,CAAT,CAAhC;AACA,QAAMW,KAAK,GAAGT,WAAW,CAAEU,KAAD,IAAgBA,KAAK,CAACD,KAAN,CAAYA,KAA7B,CAAzB;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,EAAxC;AACA,QAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAU,IAAV,CAAtC;AACA,QAAM,CAACiB,QAAD,EAAWC,WAAX,IAA0BlB,QAAQ,CAAa,EAAb,CAAxC;AACA,QAAM,CAACmB,KAAD,EAAQC,QAAR,IAAoBpB,QAAQ,CAAS,CAAT,CAAlC;;AAEA,QAAMqB,QAAQ,GAAG,MAAM;AACnB,QAAIC,IAAI,CAACC,IAAL,CAAUJ,KAAK,GAAGZ,KAAlB,IAA2BE,IAA/B,EAAqC;AACjCe,MAAAA,YAAY,CAACf,IAAI,GAAG,CAAR,CAAZ;AACAC,MAAAA,OAAO,CAACD,IAAI,GAAG,CAAR,CAAP;AACH;AACJ,GALD;;AAOA,QAAMe,YAAY,GAAG,MAAOC,UAAP,IAA8B;AAC/C,QAAI;AACAT,MAAAA,UAAU,CAAC,IAAD,CAAV;AAEA,YAAMU,KAAU,GAAG;AACfC,QAAAA,OAAO,EAAEhB,KAAK,CAACiB,GADA;AAEfnB,QAAAA,IAAI,EAAEgB,UAFS;AAGfI,QAAAA,KAAK,EAAEtB,KAHQ;AAIfuB,QAAAA,YAAY,EAAE;AAJC,OAAnB;;AAOA,UAAIjB,QAAJ,EAAc;AACVa,QAAAA,KAAK,CAACK,UAAN,GAAmBlB,QAAnB;AACH;;AAED,YAAMmB,QAAQ,GAAG,MAAM7B,UAAU,CAAC8B,WAAX,CAAuBP,KAAvB,CAAvB;AAEAR,MAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAc,GAAGe,QAAQ,CAACE,IAA1B,CAAD,CAAX;AACAd,MAAAA,QAAQ,CAACY,QAAQ,CAACb,KAAV,CAAR;AACAT,MAAAA,OAAO,CAACe,UAAD,CAAP;AACH,KAnBD,CAmBE,OAAOU,KAAP,EAAc,CACf,CApBD,SAoBU;AACNnB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GAxBD;;AA0BA,QAAMoB,cAAc,GAAG,MAAOL,UAAP,IAA8B;AACjDjB,IAAAA,WAAW,CAACiB,UAAD,CAAX;AAEA,UAAMC,QAAQ,GAAG,MAAM7B,UAAU,CAAC8B,WAAX,CAAuB;AAC1CN,MAAAA,OAAO,EAAEhB,KAAK,CAACiB,GAD2B;AAE1CnB,MAAAA,IAAI,EAAE,CAFoC;AAG1CoB,MAAAA,KAAK,EAAEtB,KAHmC;AAI1CwB,MAAAA,UAJ0C;AAK1CD,MAAAA,YAAY,EAAE;AAL4B,KAAvB,CAAvB;AAQApB,IAAAA,OAAO,CAAC,CAAD,CAAP;AACAQ,IAAAA,WAAW,CAAC,CAAC,GAAGc,QAAQ,CAACE,IAAb,CAAD,CAAX;AACAd,IAAAA,QAAQ,CAACY,QAAQ,CAACb,KAAV,CAAR;AACH,GAdD;;AAgBA,QAAMkB,YAAY,GAAG,YAAY;AAC7BvB,IAAAA,WAAW,CAACwB,SAAD,CAAX;AAEA,UAAMN,QAAQ,GAAG,MAAM7B,UAAU,CAAC8B,WAAX,CAAuB;AAC1CN,MAAAA,OAAO,EAAEhB,KAAK,CAACiB,GAD2B;AAE1CnB,MAAAA,IAAI,EAAE,CAFoC;AAG1CoB,MAAAA,KAAK,EAAEtB,KAHmC;AAI1CuB,MAAAA,YAAY,EAAE;AAJ4B,KAAvB,CAAvB;AAOApB,IAAAA,OAAO,CAAC,CAAD,CAAP;AACAQ,IAAAA,WAAW,CAAC,CAAC,GAAGc,QAAQ,CAACE,IAAb,CAAD,CAAX;AACAd,IAAAA,QAAQ,CAACY,QAAQ,CAACb,KAAV,CAAR;AACH,GAbD;;AAeApB,EAAAA,SAAS,CAAC,MAAM;AACZyB,IAAAA,YAAY,CAAC,CAAD,CAAZ,CADY,CAGZ;AACH,GAJQ,EAIN,EAJM,CAAT;;AAMA,QAAMe,aAAa,GAAG,MAAM;AACxB,QAAItB,QAAQ,CAACuB,MAAT,GAAkB,CAAtB,EAAyB;AACrB,0BACI,QAAC,cAAD;AACI,QAAA,SAAS,EAAE/B,IADf;AAEI,QAAA,QAAQ,EAAEY,QAFd;AAGI,QAAA,OAAO,EAAE,CAACN,OAAD,IAAYO,IAAI,CAACC,IAAL,CAAUJ,KAAK,GAAGZ,KAAlB,IAA2BE,IAHpD;AAII,QAAA,SAAS,EAAE,KAJf;AAKI,QAAA,WAAW,EAAE,KALjB;AAMI,QAAA,SAAS,EAAE,KANf;AAOI,QAAA,SAAS,EAAE,EAPf;AAAA,gCASI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,oBACKQ,QAAQ,CAACwB,GAAT,CAAcC,OAAD,iBACV,QAAC,OAAD;AAAS,YAAA,OAAO,EAAEA;AAAlB,aAAgCA,OAAO,CAACd,GAAxC;AAAA;AAAA;AAAA;AAAA,kBADH;AADL;AAAA;AAAA;AAAA;AAAA,gBATJ,EAeKb,OAAO,iBAAI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,gBAfhB;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ;AAmBH;;AAED,QAAIA,OAAO,IAAIE,QAAQ,CAACuB,MAAT,KAAoB,CAAnC,EAAsC;AAClC,0BAAO,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cAAP;AACH;;AAED,QAAI,CAACzB,OAAD,IAAYE,QAAQ,CAACuB,MAAT,KAAoB,CAApC,EAAuC;AACnC,0BACI,QAAC,KAAD;AAAO,QAAA,KAAK,EAAE5C,KAAK,CAAC+C,sBAApB;AAA4C,QAAA,WAAW,EAAC;AAAxD;AAAA;AAAA;AAAA;AAAA,cADJ;AAGH;;AAED,wBAAO,qCAAP;AACH,GAlCD;;AAoCA,sBACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACI;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAZ;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,IAAI,EAAE,CAAb;AAAA,gCACI,QAAC,MAAD;AAAQ,UAAA,IAAI,EAAC,MAAb;AAAoB,UAAA,OAAO,EAAEP,YAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKI,QAAC,cAAD;AAAgB,UAAA,QAAQ,EAAED,cAA1B;AAA0C,UAAA,UAAU,EAAEvB;AAAtD;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAkBI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAiC,MAAA,KAAK,EAAE;AAAEgC,QAAAA,SAAS,EAAE;AAAb,OAAxC;AAAA,gBACKN,aAAa;AADlB;AAAA;AAAA;AAAA;AAAA,YAlBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAwBH,CA1ID;;GAAM/B,Q;UAEYN,W;;;KAFZM,Q;AA4IN,eAAeA,QAAf","sourcesContent":["import { Button, Empty, Space } from 'antd';\nimport React, { FC, useEffect, useState } from 'react';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { useSelector } from 'react-redux';\nimport productApi from '../../../../api/product-api';\nimport { IProduct } from '../../../../collections/product';\nimport { Loading } from '../../../../components';\nimport { CategorySelect } from './category-select';\nimport Product from './product';\n\ninterface Props {}\n\nconst LIMIT = 15;\n\nconst Products: FC<Props> = () => {\n    const [page, setPage] = useState<number>(1);\n    const store = useSelector((state: any) => state.store.store);\n    const [category, setCategory] = useState<string>();\n    const [loading, setLoading] = useState<boolean>(true);\n    const [products, setProducts] = useState<IProduct[]>([]);\n    const [total, setTotal] = useState<number>(1);\n\n    const loadMore = () => {\n        if (Math.ceil(total / LIMIT) > page) {\n            loadProducts(page + 1);\n            setPage(page + 1);\n        }\n    };\n\n    const loadProducts = async (pageNumber: number) => {\n        try {\n            setLoading(true);\n\n            const query: any = {\n                storeId: store._id,\n                page: pageNumber,\n                limit: LIMIT,\n                withQuantity: true,\n            };\n\n            if (category) {\n                query.categoryId = category;\n            }\n\n            const response = await productApi.getProducts(query);\n\n            setProducts([...products, ...response.data]);\n            setTotal(response.total);\n            setPage(pageNumber);\n        } catch (error) {\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const selectCategory = async (categoryId: string) => {\n        setCategory(categoryId);\n\n        const response = await productApi.getProducts({\n            storeId: store._id,\n            page: 1,\n            limit: LIMIT,\n            categoryId,\n            withQuantity: true,\n        });\n\n        setPage(1);\n        setProducts([...response.data]);\n        setTotal(response.total);\n    };\n\n    const removeFilter = async () => {\n        setCategory(undefined);\n\n        const response = await productApi.getProducts({\n            storeId: store._id,\n            page: 1,\n            limit: LIMIT,\n            withQuantity: true,\n        });\n\n        setPage(1);\n        setProducts([...response.data]);\n        setTotal(response.total);\n    };\n\n    useEffect(() => {\n        loadProducts(1);\n\n        // eslint-disable-next-line\n    }, []);\n\n    const renderContent = () => {\n        if (products.length > 0) {\n            return (\n                <InfiniteScroll\n                    pageStart={page}\n                    loadMore={loadMore}\n                    hasMore={!loading && Math.ceil(total / LIMIT) > page}\n                    useWindow={false}\n                    initialLoad={false}\n                    isReverse={false}\n                    threshold={10}\n                >\n                    <div className='products'>\n                        {products.map((product) => (\n                            <Product product={product} key={product._id} />\n                        ))}\n                    </div>\n\n                    {loading && <Loading />}\n                </InfiniteScroll>\n            );\n        }\n\n        if (loading && products.length === 0) {\n            return <Loading />;\n        }\n\n        if (!loading && products.length === 0) {\n            return (\n                <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description='Không có sản phẩm nào' />\n            );\n        }\n\n        return <></>;\n    };\n\n    return (\n        <div className='products-wrap'>\n            <div style={{ padding: '15px 24px 0' }}>\n                <Space size={3}>\n                    <Button type='text' onClick={removeFilter}>\n                        Tất cả sản phẩm\n                    </Button>\n\n                    <CategorySelect onSelect={selectCategory} categoryId={category} />\n\n                    {/* \n                    //  Api not support get with \"Nhà cung cấp\" now.\n\n                    <Button type='text'>\n                        Nhà cung cấp <DownIcon />\n                    </Button> */}\n                </Space>\n            </div>\n\n            <div className='products-scroll' style={{ overflowY: 'auto' }}>\n                {renderContent()}\n            </div>\n        </div>\n    );\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}